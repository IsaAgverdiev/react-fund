{"version":3,"sources":["components/UI/MyModal/MyModal.module.css","components/UI/button/MyButton.module.css","components/UI/input/MyInput.module.css","components/UI/Loader/Loader.module.css","components/UI/select/MySelect.module.css","context/index.js","components/UI/button/MyButton.jsx","components/UI/navbar/Navbar.jsx","pages/About.jsx","components/UI/input/MyInput.jsx","pages/Login.jsx","API/PostService.js","hooks/useFetching.js","components/UI/Loader/Loader.jsx","pages/PostIdPage.jsx","hooks/usePosts.js","components/UI/select/MySelect.jsx","components/PostFilter.jsx","components/PostForm.jsx","components/PostItem.jsx","components/PostList.jsx","components/UI/MyModal/MyModal.jsx","utils/pages.js","components/UI/pagination/Pagination.jsx","pages/Posts.jsx","router/Routes.js","hooks/useObserver.js","components/AppRouter.jsx","App.js","index.js"],"names":["module","exports","AuthContext","createContext","MyButton","children","props","className","classes","myBtn","Navbar","useContext","isAuth","setIsAuth","to","onClick","localStorage","removeItem","About","MyInput","myInput","Login","onSubmit","e","preventDefault","setItem","type","placeholder","PostService","limit","page","axios","get","params","_limit","_page","response","id","useFetching","callback","useState","isLoading","setIsLoading","error","setError","a","message","Loader","cl","loader","PostIdPage","useParams","post","setPost","comments","setComments","getById","data","fetchById","getCommentbyId","fetchComments","isComLoading","useEffect","title","body","map","comm","style","marginTop","email","usePosts","posts","sort","query","sortedPosts","useMemo","console","log","b","localeCompare","useSortedPosts","filter","toLowerCase","includes","MySelect","options","defaultValue","value","onChange","target","mySelect","disabled","option","name","PostFilter","setFilter","selectedSort","PostForm","create","newPosts","Date","now","PostItem","router","useHistory","push","remove","PostList","length","textAlign","TransitionGroup","index","CSSTransition","timeout","classNames","number","MyModal","visible","setVisible","rootClasses","myModal","active","join","myModalContent","stopPropagation","getPagesCount","totalCount","Math","ceil","Pagination","totalPages","changePage","pagesArray","result","i","getPagesArray","p","Posts","privateRoutes","path","component","exact","setPosts","modal","setModal","setTotalPages","setLimit","setPage","sortedAndSearchPosts","lastElement","useRef","getAll","headers","fetchPosts","isPostsLoading","postError","ref","canLoad","observer","current","disconnect","IntersectionObserver","entries","isIntersecting","observe","useObserver","marginRight","newPost","margin","height","opacity","display","justifyContent","alignItems","publicRoutes","AppRouter","route","App","setLoading","getItem","Provider","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c5a301f9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"myModal\":\"MyModal_myModal__1mEda\",\"myModalContent\":\"MyModal_myModalContent__3YdwJ\",\"active\":\"MyModal_active__1JF3w\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"myBtn\":\"MyButton_myBtn__T30aQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"myInput\":\"MyInput_myInput__37q35\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__3Nu4X\",\"rotate\":\"Loader_rotate__2Rzht\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mySelect\":\"MySelect_mySelect__13O_G\"};","import {createContext} from 'react'\r\n\r\nexport const AuthContext = createContext(null)\r\n","import React from 'react'\r\nimport classes from './MyButton.module.css';\r\n\r\nconst MyButton = ({children, ...props}) => {\r\n  return (\r\n    <button {...props } className={classes.myBtn}>\r\n      {children}\r\n    </button>\r\n  )\r\n}\r\n\r\nexport default MyButton\r\n","import React, { useContext } from 'react';\r\nimport { Link } from 'react-router-dom/cjs/react-router-dom.min';\r\nimport { AuthContext } from '../../../context';\r\nimport MyButton from '../button/MyButton';\r\n\r\nconst Navbar = () => {\r\n  const { isAuth, setIsAuth } = useContext(AuthContext);\r\n  const logOut = () => {\r\n    setIsAuth(false);\r\n    localStorage.removeItem('auth');\r\n  };\r\n  return isAuth ? (\r\n    <div className='navbar'>\r\n      <div className='navbar__links'>\r\n        <Link to='/about' className='navbar__link'>\r\n          About\r\n        </Link>\r\n        <Link to='/posts' className='navbar__link'>\r\n          Posts\r\n        </Link>\r\n      </div>\r\n      <MyButton onClick={logOut}>Log out</MyButton>\r\n    </div>\r\n  ) : (\r\n    <div className='navbar'>Welcome, this login page</div>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n","import React from 'react';\r\n\r\nconst About = () => {\r\n  return <h1 className='title'>This about page</h1>;\r\n};\r\n\r\nexport default About;\r\n","import React from 'react'\r\nimport classes from './MyInput.module.css';\r\n\r\nconst MyInput = (props) => {\r\n  return (\r\n    <input className={classes.myInput} {...props} />\r\n  )\r\n}\r\n\r\nexport default MyInput\r\n","import React, { useContext } from 'react';\r\nimport MyButton from '../components/UI/button/MyButton';\r\nimport MyInput from '../components/UI/input/MyInput';\r\nimport { AuthContext } from '../context';\r\n\r\nconst Login = () => {\r\n  const { setIsAuth } = useContext(AuthContext);\r\n  const login = e => {\r\n    e.preventDefault();\r\n    setIsAuth(true);\r\n    localStorage.setItem('auth', 'true');\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1 className='title'>Login page</h1>\r\n      <form onSubmit={login}>\r\n        <MyInput type='text' placeholder='Name' />\r\n        <MyInput type='password' placeholder='Password' />\r\n        <MyButton>Log in</MyButton>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import axios from 'axios';\r\n\r\nexport default class PostService {\r\n  static async getAll(limit = 10, page = 1) {\r\n    const response = await axios.get('https://jsonplaceholder.typicode.com/posts', {\r\n      params: {\r\n        _limit: limit,\r\n        _page: page,\r\n      },\r\n    });\r\n    return response;\r\n  }\r\n\r\n  static async getById(id) {\r\n    const response = await axios.get('https://jsonplaceholder.typicode.com/posts/' + id);\r\n    return response;\r\n  }\r\n\r\n  static async getCommentbyId(id) {\r\n    const response = await axios.get(`https://jsonplaceholder.typicode.com/posts/${id}/comments`);\r\n    return response;\r\n  }\r\n}\r\n","import { useState } from 'react';\r\n\r\nexport const useFetching = callback => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const fetching = async (...args) => {\r\n    try {\r\n      setIsLoading(true);\r\n      await callback(...args);\r\n    } catch (e) {\r\n      setError(e.message);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n  return [fetching, isLoading, error];\r\n};\r\n","import React from 'react';\r\nimport cl from './Loader.module.css';\r\n\r\nconst Loader = () => {\r\n  return <div className={cl.loader}></div>;\r\n};\r\n\r\nexport default Loader;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport PostService from '../API/PostService';\r\nimport { useFetching } from '../hooks/useFetching';\r\nimport Loader from '../components/UI/Loader/Loader';\r\n\r\nconst PostIdPage = () => {\r\n  const params = useParams();\r\n  const [post, setPost] = useState({});\r\n  const [comments, setComments] = useState([]);\r\n\r\n  const [fetchById, isLoading] = useFetching(async () => {\r\n    const response = await PostService.getById(params.id);\r\n    setPost(response.data);\r\n  });\r\n  const [fetchComments, isComLoading] = useFetching(async () => {\r\n    const response = await PostService.getCommentbyId(params.id);\r\n    setComments(response.data);\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchById(params.id);\r\n    fetchComments(params.id);\r\n  }, []);\r\n\r\n  return (\r\n    <div className='App'>\r\n      <h1 className='title'>Post page number - {params.id}</h1>\r\n      {isLoading ? (\r\n        <Loader />\r\n      ) : (\r\n        <div>\r\n          <h4>\r\n            {post.id}. {post.title}\r\n          </h4>\r\n          <h5>{post.body}</h5>\r\n        </div>\r\n      )}\r\n      <h1>Comments</h1>\r\n      {isComLoading ? (\r\n        <Loader />\r\n      ) : (\r\n        <div>\r\n          {comments.map(comm => (\r\n            <div key={comm.id} style={{ marginTop: 15 }}>\r\n              <h5>{comm.email}</h5>\r\n              <div>{comm.body}</div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostIdPage;\r\n","import { useMemo } from 'react';\r\n\r\nexport const useSortedPosts = (posts, sort) => {\r\n  const sortedPosts = useMemo(() => {\r\n    console.log('отработала функция сортед постс');\r\n    if (sort) {\r\n      return [...posts].sort((a, b) => a[sort].localeCompare(b[sort]));\r\n    }\r\n    return posts;\r\n  }, [sort, posts]);\r\n\r\n  return sortedPosts;\r\n};\r\n\r\nexport const usePosts = (posts, sort, query) => {\r\n  const sortedPosts = useSortedPosts(posts, sort);\r\n\r\n  const sortedAndSearchPosts = useMemo(() => {\r\n    return sortedPosts.filter(post => post.title.toLowerCase().includes(query));\r\n  }, [query, sortedPosts]);\r\n\r\n  return sortedAndSearchPosts;\r\n};\r\n","import React from 'react';\r\nimport classes from './MySelect.module.css';\r\n\r\nconst MySelect = ({ options, defaultValue, value, onChange }) => {\r\n  return (\r\n    <select value={value} onChange={e => onChange(e.target.value)} className={classes.mySelect}>\r\n      <option disabled value=''>\r\n        {defaultValue}\r\n      </option>\r\n      {options.map(option => (\r\n        <option key={option.value} value={option.value}>\r\n          {option.name}\r\n        </option>\r\n      ))}\r\n    </select>\r\n  );\r\n};\r\n\r\nexport default MySelect;\r\n","import React, { useEffect, useState } from 'react';\r\nimport MyInput from './UI/input/MyInput';\r\nimport MySelect from './UI/select/MySelect';\r\n\r\nconst PostFilter = ({ filter, setFilter }) => {\r\n  return (\r\n    <div>\r\n      <MyInput\r\n        value={filter.query}\r\n        onChange={e => setFilter({ ...filter, query: e.target.value })}\r\n        placeholder={'share...'}\r\n      />\r\n\r\n      <MySelect\r\n        value={filter.sort}\r\n        onChange={selectedSort => setFilter({ ...filter, sort: selectedSort })}\r\n        defaultValue='Sort by'\r\n        options={[\r\n          { value: 'title', name: 'name' },\r\n          { value: 'body', name: 'descr' },\r\n        ]}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostFilter;\r\n","import React, { useState } from 'react';\r\nimport MyButton from './UI/button/MyButton';\r\nimport MyInput from './UI/input/MyInput';\r\n\r\nconst PostForm = ({ create }) => {\r\n  const [post, setPost] = useState({ title: '', body: '' });\r\n\r\n  const addNewPost = e => {\r\n    e.preventDefault();\r\n    const newPosts = {\r\n      ...post,\r\n      id: Date.now(),\r\n    };\r\n    create(newPosts);\r\n    setPost({ title: '', body: '' });\r\n  };\r\n\r\n  return (\r\n    <form>\r\n      {/* управляемый компонент */}\r\n      <MyInput\r\n        value={post.title}\r\n        onChange={e => setPost({ ...post, title: e.target.value })}\r\n        type='text'\r\n        placeholder='Post title'\r\n      />\r\n      <MyInput\r\n        value={post.body}\r\n        onChange={e => setPost({ ...post, body: e.target.value })}\r\n        type='text'\r\n        placeholder='Post description'\r\n      />\r\n      <MyButton onClick={addNewPost}>Add</MyButton>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PostForm;\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport MyButton from './UI/button/MyButton';\r\n\r\nconst PostItem = props => {\r\n  const router = useHistory();\r\n  return (\r\n    <div className='post'>\r\n      <div className='post__content'>\r\n        <strong>\r\n          {props.post.id}. {props.post.title}\r\n        </strong>\r\n        <div>{props.post.body}</div>\r\n      </div>\r\n      <div className='post__btns'>\r\n        <div className='openBtn'>\r\n          <MyButton onClick={() => router.push(`/post/${props.post.id}`)}>Open</MyButton>\r\n        </div>\r\n        <MyButton onClick={() => props.remove(props.post)}>Delite</MyButton>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostItem;\r\n","import React from 'react';\r\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\r\nimport PostItem from './PostItem';\r\n\r\nconst PostList = ({ posts, title, remove }) => {\r\n  if (!posts.length) {\r\n    return <h1 style={{ textAlign: 'center' }}>Posts not found!</h1>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1 style={{ textAlign: 'center' }}>{title}</h1>\r\n      <TransitionGroup>\r\n        {posts.map((post, index) => (\r\n          <CSSTransition key={post.id} timeout={500} classNames='post'>\r\n            <PostItem remove={remove} number={index + 1} post={post} />\r\n          </CSSTransition>\r\n        ))}\r\n      </TransitionGroup>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostList;\r\n","import React from 'react';\r\nimport cl from './MyModal.module.css';\r\n\r\nconst MyModal = ({ children, visible, setVisible }) => {\r\n  const rootClasses = [cl.myModal];\r\n  if (visible) {\r\n    rootClasses.push(cl.active);\r\n  }\r\n\r\n  return (\r\n    <div className={rootClasses.join(' ')} onClick={() => setVisible(false)}>\r\n      <div className={cl.myModalContent} onClick={e => e.stopPropagation()}>\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyModal;\r\n","export const getPagesCount = (totalCount, limit) => {\r\n  return Math.ceil(totalCount / limit);\r\n};\r\n\r\nexport const getPagesArray = totalPages => {\r\n  let result = [];\r\n  for (let i = 0; i < totalPages; i++) {\r\n    result.push(i + 1);\r\n  }\r\n  return result;\r\n};\r\n","import React from 'react';\r\nimport { getPagesArray } from '../../../utils/pages';\r\n\r\nconst Pagination = ({ totalPages, page, changePage }) => {\r\n  let pagesArray = getPagesArray(totalPages);\r\n\r\n  return (\r\n    <div className='page__wrap'>\r\n      {pagesArray.map(p => (\r\n        <span\r\n          onClick={() => changePage(p)}\r\n          key={p}\r\n          className={page == p ? 'page page__current' : 'page'}>\r\n          {p}\r\n        </span>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Pagination;\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport Loader from '../components/UI/Loader/Loader';\r\nimport PostService from '../API/PostService';\r\nimport { usePosts } from '../hooks/usePosts';\r\nimport { useFetching } from '../hooks/useFetching';\r\nimport PostFilter from '../components/PostFilter';\r\nimport PostForm from '../components/PostForm';\r\nimport PostList from '../components/PostList';\r\nimport MyButton from '../components/UI/button/MyButton';\r\nimport MyModal from '../components/UI/MyModal/MyModal';\r\nimport Pagination from '../components/UI/pagination/Pagination';\r\nimport { getPagesCount } from '../utils/pages';\r\nimport '../styles/App.css';\r\nimport { useObserver } from '../hooks/useObserver';\r\nimport MySelect from '../components/UI/select/MySelect';\r\n\r\nfunction Posts() {\r\n  const [posts, setPosts] = useState([]);\r\n  const [filter, setFilter] = useState({ sort: '', query: '' });\r\n  const [modal, setModal] = useState(false);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const [limit, setLimit] = useState(10);\r\n  const [page, setPage] = useState(1);\r\n  const sortedAndSearchPosts = usePosts(posts, filter.sort, filter.query);\r\n  const lastElement = useRef();\r\n\r\n  const [fetchPosts, isPostsLoading, postError] = useFetching(async (limit, page) => {\r\n    const response = await PostService.getAll(limit, page);\r\n    setPosts([...posts, ...response.data]);\r\n    const totalCount = response.headers['x-total-count'];\r\n\r\n    setTotalPages(getPagesCount(totalCount, limit));\r\n  });\r\n\r\n  useObserver(lastElement, page < totalPages, isPostsLoading, () => {\r\n    setPage(page + 1);\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchPosts(limit, page);\r\n  }, [page, limit]);\r\n\r\n  const createPost = newPost => {\r\n    setPosts([...posts, newPost]);\r\n    setModal(false);\r\n  };\r\n\r\n  const removePost = post => {\r\n    setPosts(posts.filter(p => p.id !== post.id));\r\n  };\r\n\r\n  const changePage = page => {\r\n    setPage(page);\r\n  };\r\n\r\n  return (\r\n    <div className='App'>\r\n      <MyButton style={{ marginRight: 5 }} onClick={fetchPosts}>\r\n        Get posts\r\n      </MyButton>\r\n      <MyButton style={{ marginTop: 30 }} onClick={() => setModal(true)}>\r\n        Add post\r\n      </MyButton>\r\n      <MyModal visible={modal} setVisible={setModal}>\r\n        <PostForm create={createPost} />\r\n      </MyModal>\r\n      <hr style={{ margin: '15px 0' }} />\r\n      <PostFilter filter={filter} setFilter={setFilter} />\r\n      <MySelect\r\n        style={{ marginTop: 5 }}\r\n        value={limit}\r\n        onChange={value => setLimit(value)}\r\n        defaultValue='number items'\r\n        options={[\r\n          {\r\n            value: 5,\r\n            name: '5',\r\n          },\r\n          {\r\n            value: 10,\r\n            name: '10',\r\n          },\r\n          {\r\n            value: 25,\r\n            name: '25',\r\n          },\r\n          {\r\n            value: -1,\r\n            name: 'all',\r\n          },\r\n        ]}\r\n      />\r\n\r\n      {postError && <h1>Error ${postError}</h1>}\r\n      <PostList remove={removePost} posts={sortedAndSearchPosts} title='Posts list about JS' />\r\n      <div ref={lastElement} style={{ height: 20, opacity: 0 }}></div>\r\n      {isPostsLoading && (\r\n        <div\r\n          style={{\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            marginTop: 30,\r\n          }}>\r\n          <Loader />\r\n        </div>\r\n      )}\r\n      <Pagination totalPages={totalPages} page={page} changePage={changePage} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Posts;\r\n","import About from '../pages/About';\r\nimport Login from '../pages/Login';\r\nimport PostIdPage from '../pages/PostIdPage';\r\nimport Posts from '../pages/Posts';\r\n\r\nexport const privateRoutes = [\r\n  { path: '/about', component: About, exact: true },\r\n  { path: '/posts', component: Posts, exact: true },\r\n  { path: '/post/:id', component: PostIdPage, exact: true },\r\n];\r\n\r\nexport const publicRoutes = [{ path: '/login', component: Login, exact: true }];\r\n","import { useEffect, useRef } from 'react';\r\n\r\nexport const useObserver = (ref, canLoad, isLoading, callback) => {\r\n  const observer = useRef();\r\n  useEffect(() => {\r\n    if (isLoading) return;\r\n    if (observer.current) observer.current.disconnect();\r\n    var cb = function (entries, observer) {\r\n      if (entries[0].isIntersecting && canLoad) {\r\n        callback();\r\n      }\r\n    };\r\n    observer.current = new IntersectionObserver(cb);\r\n    observer.current.observe(ref.current);\r\n  }, [isLoading]);\r\n};\r\n","import React, { useContext } from 'react';\r\nimport { Redirect, Route, Switch } from 'react-router-dom/cjs/react-router-dom.min';\r\nimport { AuthContext } from '../context';\r\nimport { privateRoutes, publicRoutes } from '../router/Routes';\r\nimport Loader from './UI/Loader/Loader';\r\n\r\nconst AppRouter = () => {\r\n  const { isAuth, isLoading } = useContext(AuthContext);\r\n\r\n  if (isLoading) {\r\n    return <Loader />;\r\n  }\r\n\r\n  return isAuth ? (\r\n    <Switch>\r\n      {privateRoutes.map(route => (\r\n        <Route key={route.path} component={route.component} exact={route.exact} path={route.path} />\r\n      ))}\r\n      <Redirect to='/posts' />\r\n    </Switch>\r\n  ) : (\r\n    <Switch>\r\n      {publicRoutes.map(route => (\r\n        <Route key={route.path} component={route.component} exact={route.exact} path={route.path} />\r\n      ))}\r\n      <Redirect to='/login' />\r\n    </Switch>\r\n  );\r\n};\r\n\r\nexport default AppRouter;\r\n","import React, { useEffect, useState } from 'react';\nimport { BrowserRouter } from 'react-router-dom';\nimport Navbar from './components/UI/navbar/Navbar';\nimport AppRouter from './components/AppRouter';\nimport { AuthContext } from './context/index';\n\nfunction App() {\n  const [isAuth, setIsAuth] = useState(false);\n  const [isLoading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (localStorage.getItem('auth')) {\n      setIsAuth(true);\n    }\n    setLoading(false);\n  }, []);\n\n  return (\n    <AuthContext.Provider\n      value={{\n        isAuth,\n        setIsAuth,\n        isLoading,\n      }}>\n      <BrowserRouter>\n        <Navbar />\n        <AppRouter />\n      </BrowserRouter>\n    </AuthContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}